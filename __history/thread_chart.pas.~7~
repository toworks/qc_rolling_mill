unit thread_chart;

interface

uses
  SysUtils, Classes, Windows, ActiveX, SyncObjs;

type
  //Здесь необходимо описать класс TViewThread:
  TThreadChart = class(TThread)

  private
    { Private declarations }
  protected
    procedure Execute; override;
  end;

var
  ThreadChart: TThreadChart;
  CriticalSectionChart: TCriticalSection;

  function ThreadChartInit: bool;
  procedure WrapperChart;//обертка для синхронизации и выполнения с другим потоком



implementation

uses
  main, sql_module, chart, thread_sql;




procedure TThreadChart.Execute;
var
  i:integer;
  e:bool;
begin
  CoInitialize(nil);
  while True do
   begin
      CriticalSectionChart.Enter;
      Synchronize(WrapperChart);
      CriticalSectionChart.Leave;
      sleep(1000);
   end;
   CoUninitialize;
end;


function ThreadChartInit: bool;
begin
        //создаем поток
        ThreadChart:=TThreadChart.Create(False);
        ThreadChart.Priority:=tpNormal;
        ThreadChart.FreeOnTerminate := True;
        CriticalSectionChart:=TCriticalSection.Create;
end;


procedure WrapperChart;
begin
      ViewsCharts;
end;






end.
